/**
 * Concrete Subject/Observable 
 */

import java.util.ArrayList;

public class BibliotecaMedranoObservable implements BibliotecaObservable{
  ArrayList<EstudianteObserver> observadores; // observers
  Libro libro; // estado

  public BibliotecaMedranoObservable(){ // constructor
    // inicializamos
    observadores = new ArrayList<EstudianteObserver>();
  }
  
  public void setLibro(Libro libro){
    this.libro = libro;
    
    if(libro.getEstaDisponible()){
      notificarObservadores();
    }
  }
  
  // register
  @Override
  public void agregarObservador(EstudianteObserver estudiante){
    suscriptores.add(estudiante);
    System.out.println("Un nuevo estudiante se suscribió a las novedades de la biblioteca! :)");
  }
  
  // unregister
  @Override
  public void quitarObservador(EstudianteObserver estudiante){
    suscriptores.remove(estudiante);
    System.out.println("Un estudiante ya no está interesado en recibir novedades! :(");
  }
  
  // notifyObservers
  @Override
  public void notificarObservadores(){
    observadores.forEach(observador -> observador.actualizar(libro));
  }
  
}
